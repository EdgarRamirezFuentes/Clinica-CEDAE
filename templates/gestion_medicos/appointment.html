{% extends 'gestion_medicos/base.html' %}
{% load static %}

{% block title %}
.: Cita :.
{% endblock title %}

{% block styles %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
{% endblock %}


{% block content %}
<div class="container">
    <div class="row">
        <div id="accordion" class="w-100">
            <p class="text-center text-primary display-4">Consulta</p>
            <div class="bg-primary w-100 text-light d-flex justify-content-around py-3">
                <p class="display-5">ID expediente: {{paciente.idUsuario.curp}}</p>
                <p class="display-5">Nombre paciente: {{paciente.idUsuario.nombre }} {{paciente.idUsuario.apellidoPaterno }} {{paciente.idUsuario.apellidoMaterno }}</p>
            </div>
            <form class="w-100 border data-form rounded p-3 mt-5" method="POST" id="recetaForm" name="recetaForm">  
                {% csrf_token %}
                <div class="card">
                    <div class="card-header" id="headingOne">
                        <h5 class="mb-0 text-center">
                            <button class="btn btn-link" type="button" data-toggle="collapse"
                                data-target="#datosExpendiente" aria-expanded="true" aria-controls="datosExpendiente">
                                Datos del expediente
                            </button>
                        </h5>
                    </div>
                    <div id="datosExpendiente" class="collapse" aria-labelledby="headingOne" data-parent="#accordion">
                        <div class="card-body">
                            <p class="font-weight-bold text-primary">Los campos con <span class="text-danger">*</span>
                                son obligatorios</p>
                            <div class="form-group">
                                <label class="text-primary" for="alergias">Alergias <span
                                        class="text-danger font-weight-bold ml-5">*</span></label>
                                <textarea class="form-control" id="alergias" name="alergias">{{expediente.alergias}}</textarea>
                            </div>
                            <div class="form-group">
                                <label class="text-primary" for="antecedentePersonal">Antecedente personal <span
                                        class="text-danger font-weight-bold ml-5">*</span></label>
                                <textarea class="form-control" id="antecedentePersonal" name="antecedentePersonal">{{expediente.antecedentes_personales}}</textarea>
                            </div>
                            <div class="form-group">
                                <label class="text-primary" for="antecedenteFamiliar">Antecedente familiar <span
                                        class="text-danger font-weight-bold ml-5">*</span></label>
                                <textarea class="form-control" id="antecedenteFamiliar" name="antecedenteFamiliar">{{expediente.antecedentes_familiares}}</textarea>
                            </div>
                            <div class="form-group">
                                <label class="text-primary" for="padecimiento">Padecimiento <span
                                        class="text-danger font-weight-bold ml-5">*</span></label>
                                <textarea class="form-control" id="padecimiento" name="padecimiento">{{expediente.padecimiento_actual}}</textarea>
                            </div>
                            <div class="form-group">
                                <label class="text-primary" for="temperatura">Temperatura <span
                                        class="text-danger font-weight-bold ml-5">*</span></label>
                                <input type="text" class="form-control" value = "{{expediente.temperatura}}" id="temperatura" name="temperatura">
                            </div>
                            <div class="form-group">
                                <label class="text-primary" for="frecCardiaca">Frecuencia cardiaca <span
                                        class="text-danger font-weight-bold ml-5">*</span></label>
                                <input type="text" class="form-control" value="{{expediente.frecuencia_cardiaca}}" id="frecCardiaca" name="frecCardiaca">
                            </div>
                            <div class="form-group">
                                <label class="text-primary" for="frecRespiratoria">Frecuencia respiratoria <span
                                        class="text-danger font-weight-bold ml-5">*</span></label>
                                <input type="textarea" class="form-control" value="{{expediente.frecuencia_respiratoria}}" id="frecRespiratoria" name="frecRespiratoria">
                            </div>
                            <div class="form-group">
                                <label class="text-primary" for="presionArterial">Presión arterial <span
                                        class="text-danger font-weight-bold ml-5">*</span></label>
                                <input type="text" class="form-control" value="{{expediente.presion_arterial}}" id="presionArterial" name="presionArterial">
                            </div>
                            <div class="form-group">
                                <label class="text-primary" for="oxigenacion">Oxigenación <span
                                        class="text-danger font-weight-bold ml-5">*</span></label>
                                <input type="text" class="form-control" value="{{expediente.saturacion_oxigeno}}" id="oxigenacion" name="oxigenacion">
                            </div>
                            <div class="form-group">
                                <label class="text-primary" for="altura">Altura (en metros) <span
                                        class="text-danger font-weight-bold ml-5">*</span></label>
                                <input type="text" class="form-control" value="{{expediente.altura}}" id="altura" name="altura">
                            </div>
                            <div class="form-group">
                                <label class="text-primary" for="peso">Peso<span
                                        class="text-danger font-weight-bold ml-5">*</span></label>
                                <input type="text" class="form-control" value="{{expediente.peso}}" id="peso" name="peso">
                            </div>
                            <div class="form-group">
                                <label class="text-primary" for="examenFisico">Examen físico <span
                                        class="text-danger font-weight-bold ml-5">*</span></label>
                                <input type="textarea" class="form-control" value="{{expediente.examen_fisico}}" id="examenFisico" name="examenFisico">
                            </div>
                            <div class="form-group">
                                <label class="text-primary" for="impresionDiagnostica">Impresión diagnóstica <span
                                        class="text-danger font-weight-bold ml-5">*</span></label>
                                <input type="textarea" class="form-control" value="{{expediente.impresion_diagnostica}}" id="impresionDiagnostica" name="impresionDiagnostica">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header" id="headingTwo">
                        <h5 class="mb-0 text-center">
                            <button class="btn btn-link collapsed" type="button" data-toggle="collapse"
                                data-target="#receta" aria-expanded="false" aria-controls="collapseTwo">
                                Receta
                            </button>
                        </h5>
                    </div>
                    <div id="receta" class="collapse" aria-labelledby="headingTwo" data-parent="#accordion">
                        <div class="card-body">
                            
                                <!--<div class="form-group">
                                    <label for="medicamento">Medicamento <span
                                        class="text-danger font-weight-bold ml-5">*</span></label>
                                    <select class="form-control" id="medicamento">
                                        <option>Paracetamol 600gm</option>
                                        <option>Omeprazol 200gm</option>
                                        <option>Ibuprofeno 300gm</option>
                                        <option>Ibuprofeno 600gm</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="indicaciones">Indicaciones <span
                                            class="text-danger font-weight-bold ml-4">*</span></label>
                                    <textarea class="form-control" id="indicaciones"></textarea>
                                </div>-->
                                <div id="newDrug">
                                </div>
                                    <input list="medSelect" name="medInput" id="medInput" style="visibility: hidden;">
                                    <datalist style="visibility: hidden;" id="medSelect">
                                        {% for medicamento in medicamentos %}
                                            <option value="{{medicamento.nombre}} | Disponibles: {{medicamento.cantidad}}">
                                        {% endfor %}
                                    </datalist>
                                <div class="form-group">
                                    <button type="button" onclick="agregarMedicamento(1)" class="btn btn-success w-80 mt-2">Agregar medicamento</button>
                                    <button type="button" onclick="eliminarMedicamento()" class="btn btn-danger w-80 mt-2">Eliminar medicamento</button>
                                    <div class="my-3 d-flex">
                                        <div class="input-group mb-3 col-md-4 h-100">
                                            <div class="input-group-text">
                                                <input type="checkbox" id="enviarCorreo" name="enviarCorreo">
                                            </div>
                                            <label class="form-control w-25 text-primary text-center">¿Enviar receta por correo electrónico?</label>
                                        </div>
                                        <div class="col-md-8 d-flex">
                                            <label class="form-control w-25 text-primary text-center" for="correoElec">Correo electrónico</label>
                                            <input type="email" class="form-control w-75" id="correoElec"
                                                placeholder="Ingrese correo electrónico" name="correoElec">
                                        </div>
                                    </div>  
                                </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header" id="headingThree">
                        <h5 class="mb-0 text-center">
                            <button class="btn btn-link collapsed" type="button" data-toggle="collapse"
                                data-target="#diagramaCorporal" aria-expanded="false" aria-controls="collapseThree">
                                Diagrama corporal
                            </button>
                        </h5>
                    </div>
                    <div id="diagramaCorporal" class="collapse" aria-labelledby="headingThree" data-parent="#accordion">
                        <div class="card-body">
                            <div class="container">
                                <div class="row">
                                    <div class="col-md-9">
                                   
                                    </div>
                                    <div class="col-md-3 align-items-center d-flex">
                                        <img src="{% static 'gestion_medicos/img/diagrama_corporal_prueba.jpeg'%}"
                                            class="image-fluid" alt="">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header" id="headingTen">
                        <h5 class="mb-0 text-center">
                            <button class="btn btn-link collapsed" type="button" data-toggle="collapse"
                                data-target="#nota" aria-expanded="false" aria-controls="collapseTen">
                                Nota
                            </button>
                        </h5>
                    </div>
                    <div id="nota" class="collapse" aria-labelledby="headingTen" data-parent="#accordion">
                        <div class="card-body">
                            <div class="form-group">
                                <label class="text-primary" for="nota">Nota</label>
                                <textarea type="textarea" class="form-control" id="nota"></textarea>
                            </div>
                        </div>
                    </div>
                </div>
                <button type="button" onclick="registrarReceta()" class="btn btn-primary w-100 mt-5">Finalizar
                    consulta</button>
            </form>
        </div>
    </div>
</div>

{% endblock%}
{% block scripts %}
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
<script src="{% static 'gestion_medicos/scripts/appointment.js' %}"></script>
<script src="{% static 'gestion_medicos/scripts/prescription.js' %}"></script>
{% endblock %}